# Secure REST API Lab

Цей проєкт є лабораторною роботою з розробки захищеного REST API на базі Node.js та Express. Головна мета проєкту — демонстрація роботи з ресурсами, реалізація механізмів аутентифікації та авторизації за допомогою middleware, а також логування запитів.

API дозволяє керувати документами та переглядати список співробітників. Доступ до ресурсів захищений: базовий доступ мають аутентифіковані користувачі, а доступ до чутливих даних (співробітників) мають лише адміністратори. Всі дані зберігаються в пам'яті (in-memory).

## Встановлення та запуск 

1.  **Встановлення залежностей:**
    ```bash
    npm install
    ```

2.  **Запуск сервера:**
    Сервер запуститься на порту 3000.
    ```bash
    npm start
    ```

## Тестування 

Для автоматичної перевірки роботи API (успішні запити, помилки доступу 403, помилки аутентифікації 401) використовуємо команду:

```bash
npm test
```
Для доступу до захищених маршрутів необхідно передавати заголовки:

X-Login | X-Password

Тестові користувачі:

Users: user1 / password123
Admin: admin1 / password123

## Тестові сценарії (Postman)

| Метод | URL | Заголовки (Headers) | Тіло (Body) | Очікуваний статус | Примітка |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **GET** | `/documents` | - | - | **401** Unauthorized | Спроба доступу без аутентифікації. |
| **GET** | `/employees` | `X-Login: user1`<br>`X-Password: password123` | - | **403** Forbidden | Спроба доступу до адмін-ресурсу з роллю 'user'. |
| **GET** | `/documents` | `X-Login: user1`<br>`X-Password: password123` | - | **200** OK | Успішне отримання даних з роллю 'user'. |
| **GET** | `/employees` | `X-Login: admin1`<br>`X-Password: password123` | - | **200** OK | Успішне отримання даних з роллю 'admin'. |
| **POST** | `/documents` | `X-Login: user1`<br>`X-Password: password123` | ```json { "title": "Test Doc", "content": "..." } ``` | **201** Created | Успішне створення ресурсу. |
| **POST** | `/documents` | `X-Login: user1`<br>`X-Password: password123` | ```json { "content": "..." } ``` | **400** Bad Request | Помилка валідації (відсутнє поле title). |
| **DELETE** | `/documents/1` | `X-Login: admin1`<br>`X-Password: password123` | - | **204** No Content | Успішне видалення. Відповідь не має тіла. |
| **GET** | `/non-existent` | `X-Login: admin1`<br>`X-Password: password123` | - | **404** Not Found | Звернення до неіснуючого маршруту. |

